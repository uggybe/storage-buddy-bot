# üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è Storage Buddy Bot –Ω–∞ Self-Hosted (Synology)

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ Storage Buddy Bot —Å Vercel –∏ Supabase Cloud –Ω–∞ –≤–∞—à Synology NAS –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ —Ö–æ—Å—Ç–∏–Ω–≥!

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Synology](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-synology)
3. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–∫–ª—é—á–µ–π-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
4. [–ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–º–∏–≥—Ä–∞—Ü–∏—è-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
5. [–°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Å–±–æ—Ä–∫–∞-–∏-–¥–µ–ø–ª–æ–π-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
6. [–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤](#–∑–∞–ø—É—Å–∫-—Å–µ—Ä–≤–∏—Å–æ–≤)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ—Å—Ç—É–ø–∞-–∏–∑–≤–Ω–µ)
8. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ-–±—ç–∫–∞–ø—ã)
9. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
10. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Synology NAS

- **–ú–æ–¥–µ–ª—å**: –ª—é–±–∞—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π DS/RS)
- **DSM**: –≤–µ—Ä—Å–∏—è 7.0 –∏–ª–∏ –≤—ã—à–µ
- **RAM**: –º–∏–Ω–∏–º—É–º 2GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB+
- **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ**: –º–∏–Ω–∏–º—É–º 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **CPU**: –ª—é–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

–ù–∞ Synology –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
- Docker (–∏–∑ Package Center)
- Container Manager (–±—ã–≤—à–∏–π Docker package –≤ DSM 7.2+)
- Git Server (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
- Git
- SSH –∫–ª–∏–µ–Ω—Ç
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä

---

## üì¶ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Synology

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Package Center** –Ω–∞ Synology
2. –ù–∞–π–¥–∏—Ç–µ **Container Manager** (–∏–ª–∏ **Docker** –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö DSM)
3. –ù–∞–∂–º–∏—Ç–µ **Install**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ SSH

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Control Panel** ‚Üí **Terminal & SNMP**
2. –í–∫–ª—é—á–∏—Ç–µ **Enable SSH service**
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 22)
4. –ù–∞–∂–º–∏—Ç–µ **Apply**

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É Synology —á–µ—Ä–µ–∑ SSH:

```bash
ssh admin@your-synology-ip
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ssh your-username@your-synology-ip
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
sudo mkdir -p /volume1/docker/storage-buddy
sudo chown -R $(whoami):users /volume1/docker/storage-buddy

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /volume1/docker/storage-buddy
```

### –®–∞–≥ 5: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/uggybe/storage-buddy-bot.git .

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω—É–∂–Ω—É—é –≤–µ—Ç–∫—É –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
git checkout main
```

---

## üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π

–ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–ª—é—á–µ–π:

```bash
cd /volume1/docker/storage-buddy
./scripts/generate-keys.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `.env.local` —Å:
- JWT —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- Supabase API –∫–ª—é—á–∞–º–∏ (ANON –∏ SERVICE_ROLE)
- –ü–∞—Ä–æ–ª–µ–º PostgreSQL
- –ë–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local`:

```bash
nano .env.local
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ vi, vim –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**

```bash
# Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç–µ –æ—Ç @BotFather)
TELEGRAM_BOT_TOKEN=1234567890:–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather

# IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ Synology
# –ù–∞–π–¥–∏—Ç–µ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP: ip addr show –∏–ª–∏ ifconfig
SUPABASE_PUBLIC_URL=http://192.168.1.100:8000  # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP
SITE_URL=http://192.168.1.100                   # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP
VITE_SUPABASE_URL=http://192.168.1.100:8000    # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP
VITE_TELEGRAM_API_URL=http://192.168.1.100/telegram

# –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password  # –°–æ–∑–¥–∞–π—Ç–µ App Password –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Gmail
SMTP_ADMIN_EMAIL=admin@yourdomain.com
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª**: `Ctrl+O`, –∑–∞—Ç–µ–º `Enter`, –∑–∞—Ç–µ–º `Ctrl+X`

---

## üíæ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –≤—ã –º–∏–≥—Ä–∏—Ä—É–µ—Ç–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ Supabase Cloud (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)

```bash
npm install -g supabase
```

#### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ë–î –∏–∑ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Database**
4. –ù–∞–π–¥–∏—Ç–µ **Connection string** –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å

#### –®–∞–≥ 3: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
cd path/to/storage-buddy-bot

# –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã
supabase db dump \
  --db-url "postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres" \
  --schema public \
  > backup-schema.sql

# –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
supabase db dump \
  --db-url "postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres" \
  --data-only \
  --schema public \
  > backup-data.sql
```

#### –®–∞–≥ 4: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –Ω–∞ Synology

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
scp backup-*.sql admin@your-synology-ip:/volume1/docker/storage-buddy/
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)

–ï—Å–ª–∏ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å –Ω—É–ª—è, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `supabase/migrations` - –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

---

## üèóÔ∏è –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–ù–∞ Synology –∏–ª–∏ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
cd /volume1/docker/storage-buddy

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏
cp .env.local .env

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run build
```

–ï—Å–ª–∏ —Å–æ–±–∏—Ä–∞–µ—Ç–µ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `dist` –Ω–∞ Synology:

```bash
scp -r dist admin@your-synology-ip:/volume1/docker/storage-buddy/
```

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ Telegram —Å–µ—Ä–≤–∏—Å–∞

```bash
cd /volume1/docker/storage-buddy/telegram-service

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install --production
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ PostgreSQL –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd /volume1/docker/storage-buddy

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ PostgreSQL —Å–Ω–∞—á–∞–ª–∞
docker-compose up -d postgres

# –ñ–¥–µ–º –ø–æ–∫–∞ PostgreSQL –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
sleep 10

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ)
docker exec -i storage-buddy-postgres psql -U postgres -d postgres < backup-schema.sql
docker exec -i storage-buddy-postgres psql -U postgres -d postgres < backup-data.sql
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ `storage-buddy-postgres` - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `storage-buddy-kong` - API Gateway
- ‚úÖ `storage-buddy-auth` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ `storage-buddy-rest` - REST API
- ‚úÖ `storage-buddy-realtime` - WebSocket
- ‚úÖ `storage-buddy-storage` - –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ `storage-buddy-studio` - Supabase Studio UI
- ‚úÖ `storage-buddy-frontend` - –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ `storage-buddy-telegram` - Telegram API —Å–µ—Ä–≤–∏—Å

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
# –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
http://your-synology-ip

# Supabase Studio (–∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å)
http://your-synology-ip:3000

# Health check API
http://your-synology-ip/health
http://your-synology-ip/telegram/health
```

---

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Synology DDNS

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Control Panel** ‚Üí **External Access** ‚Üí **DDNS**
2. –ù–∞–∂–º–∏—Ç–µ **Add**
3. –í—ã–±–µ—Ä–∏—Ç–µ **Synology** –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. –í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∏–º—è –ø–æ–¥–¥–æ–º–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `storage-buddy.synology.me`)
5. –ù–∞–∂–º–∏—Ç–µ **OK**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Cloudflare, Namecheap)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ A-–∑–∞–ø–∏—Å—å, —É–∫–∞–∑—ã–≤–∞—é—â—É—é –Ω–∞ –≤–Ω–µ—à–Ω–∏–π IP –≤–∞—à–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Port Forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ:
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç 80 ‚Üí Synology IP:80
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç 443 ‚Üí Synology IP:443

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL/TLS (HTTPS)

#### –ß–µ—Ä–µ–∑ Synology DSM

1. **Control Panel** ‚Üí **Security** ‚Üí **Certificate**
2. –ù–∞–∂–º–∏—Ç–µ **Add** ‚Üí **Add a new certificate**
3. –í—ã–±–µ—Ä–∏—Ç–µ **Get a certificate from Let's Encrypt**
4. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
5. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ `nginx.conf`:

```bash
nano /volume1/docker/storage-buddy/nginx.conf
```

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ SSL:

```nginx
listen 443 ssl http2;
ssl_certificate /etc/nginx/ssl/cert.pem;
ssl_certificate_key /etc/nginx/ssl/key.pem;
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:

```bash
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p /volume1/docker/storage-buddy/volumes/ssl

# –ö–æ–ø–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ DSM
sudo cp /usr/syno/etc/certificate/_archive/[YOUR-CERT-ID]/cert.pem /volume1/docker/storage-buddy/volumes/ssl/
sudo cp /usr/syno/etc/certificate/_archive/[YOUR-CERT-ID]/privkey.pem /volume1/docker/storage-buddy/volumes/ssl/key.pem
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx:

```bash
docker-compose restart frontend
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env.local`:

```bash
SUPABASE_PUBLIC_URL=https://yourdomain.com:8000
SITE_URL=https://yourdomain.com
VITE_SUPABASE_URL=https://yourdomain.com:8000
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

#### –®–∞–≥ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –±—ç–∫–∞–ø–∞

```bash
cd /volume1/docker/storage-buddy
./scripts/backup-local.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–∞–ø —Å–æ–∑–¥–∞–ª—Å—è –≤ `./backups/local/`

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cron –∑–∞–¥–∞—á–∏

```bash
# –û—Ç–∫—Ä—ã–≤–∞–µ–º crontab
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 3:00 –Ω–æ—á–∏
0 3 * * * cd /volume1/docker/storage-buddy && ./scripts/backup-local.sh >> /volume1/docker/storage-buddy/logs/backup.log 2>&1

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (–æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π)
0 4 * * 0 find /volume1/docker/storage-buddy/logs -name "*.log" -mtime +30 -delete
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –≤—ã–π–¥–∏—Ç–µ.

#### –®–∞–≥ 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `scripts/backup-local.sh` –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Ü–µ:

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫ Synology
rsync -avz "$BACKUP_DIR" /volumeUSB1/usbshare/storage-buddy-backups/

# –ò–ª–∏ –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä
# rsync -avz "$BACKUP_DIR" user@remote-server:/path/to/backups/
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –≤—ã—Ö–æ–¥—è—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
cd /volume1/docker/storage-buddy

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
git stash

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git stash pop

# –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
cd telegram-service && npm install && cd ..

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã
docker-compose down
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker-compose logs -f
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs postgres

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la volumes/db/data/

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v
rm -rf volumes/db/data/*
docker-compose up -d postgres
```

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JWT –∫–ª—é—á–∏
docker-compose exec auth env | grep JWT_SECRET

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
docker-compose config | grep JWT_SECRET

# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏
./scripts/generate-keys.sh
docker-compose down
docker-compose up -d
```

### –û—à–∏–±–∫–∏ CORS

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `.env.local` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω—ã URL:

```bash
# URL –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏
SUPABASE_PUBLIC_URL=http://your-actual-ip:8000
VITE_SUPABASE_URL=http://your-actual-ip:8000
```

### Telegram –±–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs telegram-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
docker-compose exec telegram-api env | grep TELEGRAM_BOT_TOKEN

# –¢–µ—Å—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
curl -X POST http://localhost:3001/health
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose logs -f postgres
docker-compose logs -f frontend
docker-compose logs -f telegram-api
```

### –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!
docker-compose down -v
rm -rf volumes/
docker-compose up -d
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# CPU –∏ –ø–∞–º—è—Ç—å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker stats

# –†–∞–∑–º–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres psql -U postgres -d postgres -c "
SELECT
    pg_database.datname,
    pg_size_pretty(pg_database_size(pg_database.datname)) AS size
FROM pg_database
ORDER BY pg_database_size(pg_database.datname) DESC;
"

# –ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
du -sh volumes/
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ß–µ—Ä–µ–∑ Docker
docker-compose exec postgres psql -U postgres -d postgres

# –ß–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–¥–ª—è GUI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ç–∏–ø–∞ DBeaver)
# Host: your-synology-ip
# Port: 5432
# Database: postgres
# Username: postgres
# Password: (–∏–∑ .env.local)
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é self-hosted Storage Buddy Bot –Ω–∞ –≤–∞—à–µ–º Synology!

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Grafana + Prometheus)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Supabase Self-Hosting Docs](https://supabase.com/docs/guides/self-hosting)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Synology Docker Guide](https://www.synology.com/en-global/dsm/packages/Docker)

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏!
