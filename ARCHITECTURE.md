# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Storage Buddy (Self-Hosted)

## ğŸ“Š ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ğ˜ĞĞ¢Ğ•Ğ ĞĞ•Ğ¢                                â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Telegram   â”‚                    â”‚  Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ ÑĞ·ĞµÑ€Ñ‹   â”‚   â”‚
â”‚  â”‚  Mini App    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   (ngrok URL)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                      â”‚
          â”‚ HTTPS                                â”‚ HTTPS
          â”‚                                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                    â”‚  ngrok  â”‚ (Ğ¢ÑƒĞ½Ğ½ĞµĞ»ÑŒ)
                    â”‚  :8080  â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚ HTTP
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Windows 10       â”‚         â”‚  Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞµÑ‚ÑŒ    â”‚
â”‚  (Ğ²Ğ°Ñˆ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€)  â”‚         â”‚  192.168.x.x:8080  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                            â”‚
    â”‚         DOCKER DESKTOP                     â”‚
    â”‚                                            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  Supabase Stack                      â”‚ â”‚
    â”‚  â”‚                                      â”‚ â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
    â”‚  â”‚  â”‚ PostgreSQL  â”‚  â”‚   PostgREST  â”‚  â”‚ â”‚
    â”‚  â”‚  â”‚   :54322    â”‚  â”‚    (API)     â”‚  â”‚ â”‚
    â”‚  â”‚  â”‚             â”‚  â”‚   :54321     â”‚  â”‚ â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
    â”‚  â”‚                                      â”‚ â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
    â”‚  â”‚  â”‚   GoTrue    â”‚  â”‚   Realtime   â”‚  â”‚ â”‚
    â”‚  â”‚  â”‚    (Auth)   â”‚  â”‚  (WebSocket) â”‚  â”‚ â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
    â”‚  â”‚                                      â”‚ â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
    â”‚  â”‚  â”‚   Storage   â”‚  â”‚    Studio    â”‚  â”‚ â”‚
    â”‚  â”‚  â”‚   (Files)   â”‚  â”‚   :54323     â”‚  â”‚ â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ HTTP
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                            â”‚
    â”‚         NODE.JS / VITE                     â”‚
    â”‚                                            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  React Frontend (Port 8080)          â”‚ â”‚
    â”‚  â”‚                                      â”‚ â”‚
    â”‚  â”‚  src/                                â”‚ â”‚
    â”‚  â”‚  â”œâ”€â”€ pages/                          â”‚ â”‚
    â”‚  â”‚  â”‚   â”œâ”€â”€ Login.tsx                   â”‚ â”‚
    â”‚  â”‚  â”‚   â”œâ”€â”€ Inventory.tsx               â”‚ â”‚
    â”‚  â”‚  â”‚   â””â”€â”€ TransactionLog.tsx          â”‚ â”‚
    â”‚  â”‚  â”‚                                   â”‚ â”‚
    â”‚  â”‚  â”œâ”€â”€ components/                     â”‚ â”‚
    â”‚  â”‚  â”‚   â””â”€â”€ ui/                         â”‚ â”‚
    â”‚  â”‚  â”‚                                   â”‚ â”‚
    â”‚  â”‚  â””â”€â”€ integrations/                   â”‚ â”‚
    â”‚  â”‚      â””â”€â”€ supabase/                   â”‚ â”‚
    â”‚  â”‚          â””â”€â”€ client.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
          ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Supabase API
          http://localhost:54321
```

---

## ğŸ”§ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1ï¸âƒ£ Frontend (React + Vite)

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `/src`
**ĞŸĞ¾Ñ€Ñ‚:** 8080
**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:**
- React 18
- TypeScript
- Vite (ÑĞ±Ğ¾Ñ€Ñ‰Ğ¸Ğº)
- TailwindCSS (ÑÑ‚Ğ¸Ğ»Ğ¸)
- shadcn/ui (ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹)
- React Query (ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- React Router (Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ)

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
- `vite.config.ts` - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Vite
- `tsconfig.json` - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ TypeScript
- `tailwind.config.ts` - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Tailwind
- `.env.local` - Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹:**
```
/                   â†’ Login (Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Telegram)
/inventory          â†’ Inventory (ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²)
/log                â†’ TransactionLog (Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹)
```

---

### 2ï¸âƒ£ Backend (Supabase Self-Hosted)

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
**Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** Supabase CLI

#### PostgreSQL (Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
- **ĞŸĞ¾Ñ€Ñ‚:** 54322
- **ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:** `postgresql://postgres:postgres@localhost:54322/postgres`
- **Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:**
  - `app_users` - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
  - `items` - Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ
  - `transactions` - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
  - `telegram_whitelist` - ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ€Ğ°Ğ·Ñ€ĞµÑˆÑ‘Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
  - `categories` - ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
  - `warehouses` - ÑĞºĞ»Ğ°Ğ´Ñ‹
  - `user_name_changes` - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¼ĞµĞ½Ñ‹ Ğ¸Ğ¼Ñ‘Ğ½

#### PostgREST (REST API)
- **ĞŸĞ¾Ñ€Ñ‚:** 54321
- **Ğ­Ğ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¸Ğ· Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹

#### GoTrue (ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ)
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
  - Ğ’Ñ…Ğ¾Ğ´ Ñ‡ĞµÑ€ĞµĞ· email/password
  - JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹
  - Ğ¡ĞµÑÑĞ¸Ğ¸

#### Realtime (WebSocket)
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†
  - Live Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ
  - Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸ÑÑ…

#### Storage (Ğ¤Ğ°Ğ¹Ğ»Ñ‹)
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
  - Bucket: `item-photos`

#### Studio (ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ°)
- **ĞŸĞ¾Ñ€Ñ‚:** 54323
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†
  - SQL Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€
  - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
  - ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²

---

### 3ï¸âƒ£ Telegram Integration

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
- Telegram WebApp SDK (Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¸Ğ· CDN)
- ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· `window.Telegram.WebApp`
- Whitelist Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾ Telegram ID

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
```
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±Ğ¾Ñ‚Ğ°
2. Telegram WebApp Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ
3. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ user.id, user.first_name, user.last_name
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ² telegram_whitelist
5. Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ â†’ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼/Ğ²Ñ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ² Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Supabase
6. ĞŸĞµÑ€ĞµĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ° /inventory
```

---

### 4ï¸âƒ£ ngrok (ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ HTTPS Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ñ Ğº localhost:8080

**Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶ĞµĞ½:**
- Telegram Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ HTTPS Ğ´Ğ»Ñ Mini Apps
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¸Ğ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ° Ğº Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ ÑĞµÑ€Ğ²ĞµÑ€Ñƒ

**ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹:**
- Cloudflare Tunnel (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾)
- localtunnel (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾)
- serveo.net (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾)

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:
```
Telegram â†’ Frontend â†’ Supabase GoTrue â†’ PostgreSQL
                â†“
          JWT Token
                â†“
         sessionStorage
```

### Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸:
```
Frontend (React Query) â†’ Supabase API â†’ PostgreSQL
         â†“                               â†“
    ĞšÑÑˆ (5 ÑĞµĞº)                    Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° items
         â†“                               â†“
    ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI              Realtime Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°
                                         â†“
                              Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸:
```
Frontend â†’ POST /transactions â†’ PostgreSQL Trigger
                                      â†“
                              ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ items.quantity
                                      â†“
                              Realtime broadcast
                                      â†“
                          Ğ’ÑĞµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
storage-buddy-bot/
â”‚
â”œâ”€â”€ src/                          # Frontend ĞºĞ¾Ğ´
â”‚   â”œâ”€â”€ main.tsx                  # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”‚   â”œâ”€â”€ App.tsx                   # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                    # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
â”‚   â”‚   â”œâ”€â”€ Login.tsx             # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ Inventory.tsx         # Ğ¡ĞºĞ»Ğ°Ğ´
â”‚   â”‚   â””â”€â”€ TransactionLog.tsx    # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ ui/                   # shadcn ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â””â”€â”€ ...                   # ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                    # React Ñ…ÑƒĞºĞ¸
â”‚   â”‚   â””â”€â”€ useKeyboardHandler.ts
â”‚   â”‚
â”‚   â””â”€â”€ integrations/
â”‚       â””â”€â”€ supabase/
â”‚           â”œâ”€â”€ client.ts         # Supabase ĞºĞ»Ğ¸ĞµĞ½Ñ‚
â”‚           â””â”€â”€ types.ts          # TypeScript Ñ‚Ğ¸Ğ¿Ñ‹
â”‚
â”œâ”€â”€ supabase/                     # Backend
â”‚   â”œâ”€â”€ config.toml               # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ migrations/               # SQL Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ 20251108...sql
â”‚   â”‚   â”œâ”€â”€ 20251109...sql
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ functions/                # Edge Functions
â”‚       â””â”€â”€ send-telegram-file/
â”‚
â”œâ”€â”€ public/                       # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
â”‚   â””â”€â”€ assets/
â”‚
â”œâ”€â”€ .env.local                    # Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
â”œâ”€â”€ package.json                  # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ vite.config.ts                # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Vite
â”œâ”€â”€ tsconfig.json                 # TypeScript
â”œâ”€â”€ tailwind.config.ts            # TailwindCSS
â”‚
â”œâ”€â”€ start-windows.bat             # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
â”œâ”€â”€ stop-windows.bat              # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸
â”‚
â”œâ”€â”€ DEPLOYMENT.md                 # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ
â”œâ”€â”€ QUICK_START.md                # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
â”œâ”€â”€ CHECKLIST.md                  # Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚
â””â”€â”€ ARCHITECTURE.md               # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Row Level Security (RLS)

Ğ’ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°Ğ¼Ğ¸ RLS:

```sql
-- ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸
CREATE POLICY "Users can view own transactions"
ON transactions FOR SELECT
USING (auth.uid() = user_id);
```

### ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

- JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ñ Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸ĞµĞ¼ ÑÑ€Ğ¾ĞºĞ°
- Whitelist Ğ¿Ğ¾ Telegram ID
- Ğ¥ÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸ Ğ² Supabase Auth

### Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ

- Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğµ
- ĞĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾
- HTTPS Ñ‡ĞµÑ€ĞµĞ· ngrok Ğ´Ğ»Ñ Telegram

---

## ğŸ“Š Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑÑ…ĞµĞ¼Ğ°)

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:

```sql
app_users
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ user_id (uuid, FK â†’ auth.users)
â”œâ”€â”€ name (text)
â””â”€â”€ created_at (timestamp)

items
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ name (text)
â”œâ”€â”€ quantity (integer)
â”œâ”€â”€ manufacturer (text)
â”œâ”€â”€ model (text)
â”œâ”€â”€ location (text)
â”œâ”€â”€ warehouse_id (uuid, FK â†’ warehouses)
â”œâ”€â”€ category_id (uuid, FK â†’ categories)
â”œâ”€â”€ photos (text[])
â””â”€â”€ created_at (timestamp)

transactions
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ item_id (uuid, FK â†’ items)
â”œâ”€â”€ user_id (uuid, FK â†’ auth.users)
â”œâ”€â”€ action (text: 'add', 'remove', 'set', ...)
â”œâ”€â”€ quantity_change (integer)
â”œâ”€â”€ old_quantity (integer)
â”œâ”€â”€ new_quantity (integer)
â”œâ”€â”€ notes (text)
â””â”€â”€ created_at (timestamp)

telegram_whitelist
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ telegram_id (bigint, UNIQUE)
â”œâ”€â”€ first_name (text)
â”œâ”€â”€ last_name (text)
â””â”€â”€ created_at (timestamp)
```

---

## ğŸš€ Production Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

Ğ•ÑĞ»Ğ¸ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½ÑƒÑ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ 24/7:

### 1. VPS Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞ³Ğ¾ ĞŸĞš
- **Hetzner** (Ğ¾Ñ‚ â‚¬4/Ğ¼ĞµÑ)
- **DigitalOcean** (Ğ¾Ñ‚ $6/Ğ¼ĞµÑ)
- **Contabo** (Ğ¾Ñ‚ â‚¬5/Ğ¼ĞµÑ)

### 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ systemd ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Linux)
```ini
[Unit]
Description=Storage Buddy Frontend
After=docker.service

[Service]
Type=simple
WorkingDirectory=/opt/storage-buddy-bot
ExecStart=/usr/bin/npm run dev
Restart=always

[Install]
WantedBy=multi-user.target
```

### 3. Nginx reverse proxy
```nginx
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
    }
}
```

### 4. SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚
```bash
certbot --nginx -d yourdomain.com
```

### 5. ĞĞ²Ñ‚Ğ¾Ğ±ÑĞºĞ°Ğ¿Ñ‹
```bash
# Cron ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² 3 Ğ½Ğ¾Ñ‡Ğ¸
0 3 * * * cd /opt/storage-buddy-bot && supabase db dump -f /backups/backup-$(date +\%Y\%m\%d).sql
```

---

## ğŸ’¡ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Frontend
- Lazy loading ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
- React Query ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (5 ÑĞµĞº)
- Debounce Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- Optimistic updates

### Backend
- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
- Connection pooling Ğ² PostgreSQL
- Realtime Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸ĞºĞ¾Ğ²

### Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ VACUUM
- ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- ĞŸĞ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ (Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğ°Ğ¼)

---

## ğŸ†˜ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### Ğ›Ğ¾Ğ³Ğ¸

**Supabase:**
```bash
docker logs supabase-db
docker logs supabase-auth
docker logs supabase-realtime
```

**Frontend:**
- Browser Console (F12)
- Vite output Ğ² Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸

**Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
```sql
-- Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ‘Ğ”
SELECT pg_size_pretty(pg_database_size('postgres'));

-- Ğ¡Ğ°Ğ¼Ñ‹Ğµ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
SELECT * FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;
```

**Supabase Studio:**
- http://localhost:54323 â†’ Database â†’ Reports

---

## ğŸ“š Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

- [Supabase Docs](https://supabase.com/docs)
- [Vite Docs](https://vitejs.dev/)
- [React Query Docs](https://tanstack.com/query/latest)
- [Telegram Bot API](https://core.telegram.org/bots/webapps)
